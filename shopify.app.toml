# Learn more about configuring your app at https://shopify.dev/docs/apps/tools/cli/configuration

client_id = "34db71502f28def158a1fbe23c94f559"
name = "XWAN.AI.APP"
application_url = "https://example.com"
embedded = true

[build]
automatically_update_urls_on_dev = true

[webhooks]
api_version = "2026-01"

  [[webhooks.subscriptions]]
  topics = [ "app/scopes_update" ]
  uri = "/webhooks/app/scopes_update"

  [[webhooks.subscriptions]]
  topics = [ "app/uninstalled" ]
  uri = "/webhooks/app/uninstalled"

  # Customer webhooks to sync with xwanai.com platform
  [[webhooks.subscriptions]]
  topics = [ "customers/create" ]
  uri = "/webhooks/customers/create"

  [[webhooks.subscriptions]]
  topics = [ "customers/update" ]
  uri = "/webhooks/customers/update"

  [[webhooks.subscriptions]]
  topics = [ "customers/delete" ]
  uri = "/webhooks/customers/delete"

[access_scopes]
# Learn more at https://shopify.dev/docs/apps/tools/cli/configuration#access_scopes
# Read customers scope for webhook data and SSO, write_customers for customer updates if needed
scopes = "read_customers,write_customers"
optional_scopes = [ ]
use_legacy_install_flow = false

[auth]
redirect_urls = [ ]

# Note: App Proxy must be configured manually in Shopify Admin:
# Settings > Apps and sales channels > App and embed settings > App proxies
# - Subpath prefix: xwan-ai-sso
# - Proxy prefix: apps
# - Proxy subpath: sso (for SSO redirect) or check-login (for login check)
# - Proxy URL: {your_app_url}/app-proxy/sso or {your_app_url}/app-proxy/check-login
# 
# Available App Proxy endpoints:
# - /apps/xwan-ai-sso/sso - Generate SSO token and redirect to xwanai.com
# - /apps/xwan-ai-sso/check-login - Check customer login status and get SSO token
# - /apps/xwan-ai-sso/sso-verify - Verify SSO token (optional, for debugging)
